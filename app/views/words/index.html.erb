<p id="notice"><%= notice %></p>
<h1>Words</h1>
<table>
  <thead>
    <tr>
      <th>Diction</th>
      <th>Mean</th>
      <th>Category</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @words.each do |word| %>
      <tr>
        <td><%= word.diction %></td>
        <td><%= word.mean %></td>
        <td><%= word.category_id %></td>
        <td><%= link_to 'Show', word %></td>
        <td><%= link_to 'Edit', edit_word_path(word) %></td>
        <td><%= link_to 'Destroy', word, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<br>
<%= link_to 'New Word', new_word_path %>
<%= provide(:title, "My learnt words") %>
<div class="container">
  <div class="row d-flex justity-content-center mt-5">
    <div class="col-md-8">
      <div class="card border-bottom-primary mb-3">
        <div class="card-header bg-transparent border-primary">
          <h2 class="h2">Words List</h2>
        </div>
        <div class="card-body">
          <div class="row">
            <% @words.each do |word| %>
              <div class="col-12">
                <div class="card mt-1">
                  <div class="card-body">
                    <div class="row d-flex">
                      <div class="col-sm-6">
                        <p class="card-title text-info d-inline"><%= word.diction %></p>
                        <p class="d-inline"><%= word.mean %></p>
                        <%= form_with model: word, url: word_add_learned_word_path, method: "post", remote: true, id: "form_#{word.id}"  do |f| %>
                          <%= hidden_field :word, :id, value: word.id %>
                          <% if current_user.words.include?(word) %>
                            <%= hidden_field :word, :option, value: "remove" %>
                            <%= submit_tag "Remove from list", class: "btn btn-danger", 'data-disable-with' => "Please wait.." %>
                          <% else %>
                            <%= hidden_field :word, :option, value: "add" %>
                            <%= submit_tag "Check as Learnt", class: "btn btn-success", 'data-disable-with' => "Please wait.." %>
                          <% end %>
                        <% end %>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
      <div>
        <div class="card border-bottom-success mb-3">
          <div class="card-header bg-transparent border-success">
            <h2 class="h2">Filter & Search</h2>
          </div>
          <div class="card-body">
            <form class="form" id="searchAndFilterForm" method="GET">
              <input type="text" name="page" value="1" hidden>
              <div class="form-group">
                <label class="" for="search_key">Search</label>
                <input type="text" class="form-control" id="search_key" name="search_key" value="<%= @search_key %>" placeholder="For example: juxtaposition">
              </div>
              <div class="form-group">
                <button id="search" class="btn btn-primary mb-2">Submit</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
